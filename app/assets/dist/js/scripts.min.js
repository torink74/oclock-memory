let cards=document.querySelectorAll(".card"),previousReturnedCard=null,progressBar=document.getElementById("progress-bar");function addCardListeners(){cards.forEach(function(e){e.addEventListener("click",handleClickOnCard)})}function removeCardListeners(){cards.forEach(function(e){e.removeEventListener("click",handleClickOnCard)})}function isGameWon(){return!(document.querySelectorAll(".hide").length>0)}function gameOver(){alert("Aie, tu n'as pas été assez rapide ! Essayes de modifier le temps de ta partie !")}function displayCard(e){return new Promise(a=>setTimeout(a,e))}async function handleCardAction(e){if(e.classList.remove("hide"),null!==previousReturnedCard)if(previousReturnedCard.dataset.letter===e.dataset.letter)previousReturnedCard=null,e.classList.add("hide");else{e.dataset.letter.substr(0,1)===previousReturnedCard.dataset.letter.substr(0,1)?(e.classList.add("found"),previousReturnedCard.classList.add("found"),isGameWon()&&(progressBar.style.animationPlayState="paused",alert("Bravo champion ! Essayes de modifier la durée de la partie pour plus de challenge !"))):(removeCardListeners(),await displayCard(2e3),e.classList.add("hide"),previousReturnedCard.classList.add("hide"),addCardListeners()),previousReturnedCard=null}else previousReturnedCard=e}function handleClickOnCard(e){let a=e.target;a.classList.contains("found")||handleCardAction(a)}function gameLoop(e){progressBar.addEventListener("animationend",gameOver),progressBar.style.animationDuration=e+"s",progressBar.style.animationPlayState="running"}addCardListeners(),gameLoop(300);